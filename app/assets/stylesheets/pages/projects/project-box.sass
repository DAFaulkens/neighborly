$project-box-height: 335px
$content-height: 195px
$content-top-transition: -100px

.project-box
  margin-bottom: +emCalc(15px)
  position: relative
  overflow: hidden
  a
    color: $body-font-color

  &.soon a
    cursor: default

  &.large
    overflow: visible
    .cover img
      width: 100%
      height: auto

    .content
      padding-left: 0
      padding-right: 0

    .name
      background: $primary-color
      padding-top: +emCalc(20px)
      padding-bottom: +emCalc(30px)
      color: white

    .description *
      opacity: 1

  .status-image
    position: absolute
    top: -1px
    left: +emCalc(14px)
    z-index: 1

  .cover img
    width: 100%

  .content
    height: +emCalc($content-height)
    @extend .white
    position: relative
    z-index: 2

  .name
    margin: 0
    padding: +emCalc(15px, 20px, 7px, 20px)
    font-size: 90%
    text-transform: uppercase
    font-weight: 500
    max-height: +emCalc(130px)

  .rating
    position: absolute
    text-align: center
    padding: +emCalc(10px)
    width: +emCalc(55px)
    height: +emCalc(55px)
    background: #fff
    border-radius: 50%
    margin-left: -22.5px
    left: 50%
    top: -30px
    z-index: -1

  .location
    padding: +emCalc(20px)
    padding-top: 0
    padding-bottom: +emCalc(10px)
    margin-bottom: 0
    font-size: 85%

  .description
    padding: +emCalc(20px)
    padding-top: 0
    padding-bottom: 0
    margin-bottom: 0
    font-size: 90%
    line-height: 1.2
    *
      opacity: 0
    span
      display: block
      font-size: 85%
      padding-bottom: +emCalc(10px)

  .status
    @extend .white
    position: absolute
    width: 100%
    bottom: 0
    padding: +emCalc(20px)
    padding-top: 0
    font-size: 90%
    .row
      padding-top: +emCalc(10px)
      border-top: 1px solid lighten($border-color, 5%)
    .pledged, .time
      font-size: 75%
      i
        padding-right: +emCalc(5px)
    .time
      text-align: right

body.embed
  .project-box
    margin-bottom: 0
    padding: 0
  .project-box-video-embed
    text-align: center
    h3
      line-height: 1
      a
        color: $body-font-color
        text-transform: uppercase
        font-size: 60%
    h5
      font-size: 90%
    .video-embed-footer
      width: 360px
      left: 50%
      margin-left: -180px
      position: fixed
      bottom: 5px

@media #{$small}
  .project-box
    height: +emCalc($project-box-height)
    margin-bottom: +emCalc(30px)
    &.large
      .cover
        height: auto
        overflow: hidden
        position: absolute
        img
          height: +emCalc($project-box-height)
          width: auto
      .content
        height: 100%
    .cover
      height: +emCalc(150px)
      overflow: hidden

@media #{$medium}
  .project-box
    &:not(.large) a
      display: inline-block
      width: 100%
    &:hover:not(.large)
      .description *
        +vendor-prefix(transition, all 1s cubic-bezier(0.190, 1.000, 0.220, 1.000))
        opacity: 1
      .content
        +vendor-prefix(transition, all .4s ease-out)
        height: +emCalc($content-height - $content-top-transition)
        margin-top: +emCalc($content-top-transition)
    &.large
      .cover img
        height: 100%
        width: auto
      .content
        height: +emCalc($project-box-height)
